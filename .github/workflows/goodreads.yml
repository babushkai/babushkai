name: Goodreads Books
on:
  schedule:
    - cron: "0 */6 * * *"  # Every 6 hours
  workflow_dispatch:  # Manual trigger

jobs:
  update-readme:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - name: Goodreads Profile Workflow
        uses: zwacky/goodreads-profile-workflow@main
        with:
          goodreads_user_id: "198324759"
          shelf: "currently-reading"
          template: "- [$title]($url) by $author"
      - name: Commit changes
        run: |
          git config --local user.email "github-actions[bot]@users.noreply.github.com"
          git config --local user.name "github-actions[bot]"
          git diff --quiet || (git add -A && git commit -m "Update Goodreads books" && git push)

name: Goodreads Books
on:
  schedule:
    - cron: "0 */6 * * *"
  workflow_dispatch:

jobs:
  update-readme:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4

      - name: Goodreads - Read books
        uses: zwacky/goodreads-profile-workflow@main
        with:
          goodreads_user_id: "198324759"
          shelf: "read"
          template: "- [$title]($url) by $author ‚≠ê$average_rating"
          comment_tag_name: "GOODREADS-READ"

      - name: Commit changes
        run: |
          git config --local user.email "github-actions[bot]@users.noreply.github.com"
          git config --local user.name "github-actions[bot]"
          git diff --quiet || (git add -A && git commit -m "Update Goodreads books" && git push)
